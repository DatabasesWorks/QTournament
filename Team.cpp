/* 
 * File:   Team.cpp
 * Author: volker
 * 
 * Created on March 2, 2014, 6:13 PM
 */

#include "Team.h"
#include "TournamentDataDefs.h"
#include "TournamentDB.h"
#include "TournamentErrorCodes.h"
#include "TeamMngr.h"
#include "Tournament.h"

namespace QTournament
{

  Team::Team(TournamentDB* db, int rowId)
  :GenericDatabaseObject(db, TAB_TEAM, rowId)
  {
  }

//----------------------------------------------------------------------------

  Team::Team(TournamentDB* db, dbOverlay::TabRow row)
  :GenericDatabaseObject(db, row)
  {
  }

//----------------------------------------------------------------------------

  QString Team::getName(int maxLen) const
  {
    QString fullName = row[GENERIC_NAME_FIELD_NAME].toString();
    
    if (maxLen < 1)
    {
      return fullName;
    }
    
    if (maxLen == 1)
    {
      return fullName.left(1);
    }
    
    if (maxLen == 2)
    {
      return fullName.left(1) + ".";
    }
    
    if ((maxLen > 2) && (maxLen < fullName.length()))
    {
      return fullName.left(maxLen - 1) + ".";
    }
    
    return fullName;
  }

//----------------------------------------------------------------------------

  ERR Team::rename(const QString& nn)
  {
    return Tournament::getTeamMngr()->renameTeam(*this, nn);
  }

//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------


//----------------------------------------------------------------------------

}